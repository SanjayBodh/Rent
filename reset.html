<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>firebase auth</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<form id="MainForm" class="w-20 m-4">
<h2 class="mb-3">reset password </h2> 
   <div class="form-floating mb-3">
  <input type="email" class="form-control" id="email" placeholder="name@example.com">
  <label for="floatingInput">Email address</label>
</div>
<input type="button" class="btn btn-primary" style="float: right" id="forgetpassword" value="reset">
</form>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
  import { getDatabase, ref, child, get } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-database.js";
  import { getAuth, signInWithEmailAndPassword, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-auth.js";
 
  const firebaseConfig = {
     apiKey: "AIzaSyBRZrQ35ZCsWtJ_Dvcq0w0iOED2ypXv89w",
    authDomain: "databse-b7f4b.firebaseapp.com",
    databaseURL: "https://databse-b7f4b-default-rtdb.firebaseio.com",
    projectId: "databse-b7f4b",
    storageBucket: "databse-b7f4b.appspot.com",
    messagingSenderId: "440573409846",
    appId: "1:440573409846:web:4a49d38fc1d5e5bb803697",
    measurementId: "G-JE7M0T3QSJ"
  };
   
  const app = initializeApp(firebaseConfig);
  const db = getDatabase();
  const auth = getAuth(app);
  const dbref = ref(db);

  let email = document.getElementById('email');
  let Forgetpassword = document.getElementById('forgetpassword');

  let forgetPassword = () => {
let allowedDomains = ['gmail.com', 'icloud.com', 'yahoo.com'];
  let validEmail = false;

  for (let domain of allowedDomains) {
    if (email.value.endsWith('@' + domain)) {
      validEmail = true;
      break;
    }
  }

  if (!validEmail) {
    alert("Invalid email address. Please enter a valid email we accept only (Gmail.com) (icloud.com) (yahoo.com).");
    return;
  }


    sendPasswordResetEmail(auth, email.value)
      .then(() => {
        alert("A reset link has been sent to your email");
        window.location.href="index.html";
      })
      .catch((error) => {
        console.log(error.code);
        console.log(error.message);
      })
  }

  Forgetpassword.addEventListener('click', forgetPassword);
</script>
</body>
</html>

