<html>
<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="manifest" href="manifest.json">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<title>RENT INNVOICE</title>
</head>
<style>
.flexx{
display:flex;
justify-content:space-between;
}
.flexxx{
display:flex;
justify-content:space-between;
}
.flexxxx{
display:flex;
justify-content:space-between;
}
body{
scroll-behavior:smooth;
height:auto;
margin:0;
padding:10px;
overflow:hidden;
 background: linear-gradient(to bottom, #053B50, white,white,white,white,white);
}
.head-content{
text-align:center;
color:white;
}
.head-contentH3{
text-align:center;
position:relative;
bottom:15px;
}
.first-field{
border:none;
border-radius:10px;
box-shadow:0px 0px 5px 5px rgba(0,0,0,0.1);
padding:10px;
background-color:#053B50;#4682A9;
position:relative;
height:100px;
}
.second-field{
border:none;
border-radius:10px;
box-shadow:0 -5px 1px rgba(0,0,0.5);
padding:10px;
background-color:#176B87;#749BC2;
width:45%;
height:auto;
}
.second-fieldone{
border:none;
border-radius:10px;
box-shadow:0 5px 1px rgba(0,0,0.5);
padding:10px;
background-color:#176B87;#749BC2;
width:45%;
height:180px;
position:relative;
}
.field-flex{
display:flex;
justify-content:space-between;
}
#room{
positionabsolute;
left3%;
bottom3%;
}
#editable{
position:relative;
right:200px;;
bottom:5px;
width:50px;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-radius:0;
font-size:16px;
text-align:center;
color:white;
}
#address,#number{
POSITION:relative;
left230px;
top10px;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
width:auto;
}
#name,#email{
positionrelative;
top10px;
}
#name{
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
}
#email{
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
}
#address,#number,#name,#email{
font-size:13px;
text-align:center;
}
#rent {
positionrelative;
left130px;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
}
#electricity {
positionrelative;
left30px;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
}
#water {
positionrelative;
left80px;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
}
#description {
positionrelative;
left140px;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
}
#billno {
positionrelative;
left92px;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
}
#totalValue{
positionrelative;
left48px;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
}
#deductAmount{
positionrelative;
left48px;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
}
#deductedValue{
positionrelative;
left10px;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
}
label{
color:white;
}
::placeholder{
text-align:center;
color:black;#EF6262;
}

        .modal {
            display: none;
            position: fixed;
            top: 0%;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
        }

        .modal-content {
            background-color#749BC2;
backgroundlinear-gradient(from top #4682A9,#749BC2);
backdrop-filter:blur(15px);
            margin: 10% auto;
            padding: 20px;
            width: 60%;
border-radius:20px;
color:white;
        }
#closeModal{
font-size:25px;
font-weight:bold;
}
#h2{
text-align:center;
position:relative;
bottom:10px;
}
#date{
positionabsolute;
right20%;
bottom3%;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
text-align:center;
color:white;
}

#time{
positionabsolute;
right2%;
bottom3%;
background-color:transparent;
border:none;
border-bottom:1px solid white;
border-top0.5px solid white;
border-radius:0 0 5px 5px;
text-align:center;
color:white;
}
input[type="text"],input[type="number"],input[type="email"]{
font-size:15px;
}
input:focus {
    outline: none;
}
button{
border:none;
border-radius:5px;
padding:5px;
background-color:#A73121;
color:white;
}
button:hover{
background-color:#E25E3E;
transition:all ease 0.2s;
}
#right{
position:relative;
top10px;
right:4px;
color:white;
}
#left{
position:relative;
top10px;
color:white;
}
#top{
position:relative;
top:5px;
font-size:35px;
}
#down{
position:relative;
top:5px;
color:white;
}
#downtop{
position:relative;
top:5px;
color:white;
}
#name::placeholder,#email::placeholder,#address::placeholder,#number::placeholder{
color:white;
text-alignleft;
}
@media (max-width:768px){
.head-content{
font-size:19px;
position:relative;
bottom:5px;
}
.head-contentH3{
font-size:14px;
}
.field-flex{
display: flex;
    flex-direction: column;
gap:1rem;
}
.second-field{
width:auto;
height:auto;
}
.second-fieldone{
width:auto;
height:auto;
}
body{
overflow:scroll;
}

#date{
font-size:11px;
color:white;
width:80px;
}
#time{
font-size:11px;
color:white;
width:120;
}
#right{
position:relative;
top5px;
right:6px;
color:white;
}
#left{
position:relative;
bottom10px;
right:6px;
color:white;
}
#name,#email{
position:relative;
bottom10px;
}
#name,#email,#address,#number{
font-size:15px;
}
#name::placeholder,#email::placeholder,#address::placeholder,#number::placeholder{
color:white;
text-align:left;
}
.flexx{
display:flex;
FLEX-DIRECTION:COLUMN;
gap:1rem;
}
.flexxx{
display:flex;
FLEX-DIRECTION:COLUMN;
justify-content:center;
align-items:center;
gap:1rem;
}
input[type="text"],input[type="number"],input[type="email"]{
font-size:15px;
}
#editable{
position:relative;
left:0px;
}
 .modal-content {
            background-color#749BC2;
backgroundlinear-gradient(from top #4682A9,#749BC2);
backdrop-filter:blur(15px);
            margin: 10% auto;
            padding: 20px;
            width: 80%;
border-radius:20px;
color:white;
        }
#h2{
font-size:18px;
}
.first-field{
border:none;
border-radius:10px;
box-shadow:0px 0px 5px 5px rgba(0,0,0,0.1);
padding:10px;
background-color:#053B50;#4682A9;
position:relative;
height:auto;
}
#installButton{
font-size:13px;
position:absolute;
top:8%;
z-index:1000;
}
}
</style>
<body>
<button id="installButton" style="displaynone;">Install Rent Inv</button>
<form action="https://formsubmit.co/7344ea1665639ee0f8c9e2d587fd2a2c" method="POST" name"sanjay-sheet" id"myForm" >
<h1 class="head-content"><span class="material-symbols-outlined" id="top">
home_app_logo
</span>RENT CALCULATOR INVOICE</h1>
<div class="first-field">
<h2 class="head-content" style="color:white;">MONTHLY RENT INVOICE</h2>
<div class="flexxx">
<div>
<span class="material-symbols-outlined" id="downtop">
account_box
</span><label for="room" id="room">ROOM NO</label>
 
</div> 
<h2  id="editable" contenteditable="true"></h2>       
<div>
<input type="text" id="date" name="DATE" readonly>
<input type="text" id="time"  name="TIME" readonly>
</div>
</div>
</div>
<br>
<div class="field-flex">
<div class="second-fieldone">
<h3 class="head-contentH3" style="color:white;">CUSTOMER INFORMATION</h3>
<div class="flexxx">
<div>
<span class="material-symbols-outlined" id="left">
person_search
</span>
<input type="text" id="name" name="NAME" placeholder="NAME"></div>
<div>
<span class="material-symbols-outlined" id="right">
contact_mail
</span>
<input type="text" id="address" name="ADDRESS" placeholder="ADDRESS"></div>
</div>
<br>
<div class="flexxx">
<div>
<span class="material-symbols-outlined" id="left">
mail
</span>
<input type="email" id="email" name="EMAIL" placeholder="ABC@GMAIL.COM"></div>
<div>
<span class="material-symbols-outlined" id="right">
call
</span>
<input type="number" id="number" VALUE="123456789" name"NUMBERS" placeholder="+(91)12345-67890"></div>
</div>
<input type="hidden" name="_next" value="https://sanjaybodh.github.io/Thanku">
<input type="hidden" name="_captcha" value="false">
<input type="hidden" name="_template" value="table">
<br><br><br>
</div>
<div class="second-field">
<h3 class="head-contentH3" style="color:white;">RENT INFORMATION</h3>
<div class="flexx">
<div>
<span class="material-symbols-outlined" id="down">
foundation
</span>
<label for="rent">MONTHLY RENT (&#8377.)</label></div>
<input type="number" id="rent" name="RENT" value="3000">
</div>
<br>
<div class="flexx">
<div>
<span class="material-symbols-outlined" id="down">
electric_meter
</span><label for="electricity">ELECTRICITY BILL (&#8377.)</label></div>
<input type="number" id="electricity" name="ELECTRICITY">
</div>
<br>
<div class="flexx">
<div>
<span class="material-symbols-outlined" id="down">
water_damage
</span><label for="water">WATER BILL (&#8377.)</label></div>
<input type="number" id="water" name="WATER">
</div>
<br>
<div class="flexx">
<div>
<span class="material-symbols-outlined" id="down">
calendar_month
</span><label for="description">RENT MONTH</label></div>
<input type="text" id="description" name="MONTH" list="item">
<datalist id="item" name="hii" style="width:1000px;">
<option VALUE=""></option>
<option value="JANUARY"></option>
<option value="FEBRUARY"></option>
<option value="MARCH"></option>
<option value="APRIL"></opton>
<option value="MAY"></option>
<option value="JUNE"></option>
<option VALUE="JULY"></option>
<option value="AUGUST"></option>
<option value="SEPTEMBER"></opton>
<option value="OCTOBER"></option>
<option value="NOVEMBER"></option>
<option VALUE="DECEMBER"></option>
		</datalist>
</div>
<br>
<div class="flexx">
<div>
<span class="material-symbols-outlined" id="down">
wysiwyg
</span><label for="billNo">BILL NUMBER</label></div>
<input type="text" id="billNo" name="BILL NO" readonly>
</div>
<br>
<div class="flexx">
<div>
<span class="material-symbols-outlined" id="down">
currency_rupee
</span><label for="totalValue">TOTAL AMOUNT (&#8377.)</label></div>
<input type="text" id="totalValue" name="VALUE" readonly>
</div>
<br>
<div class="flexx">
<div>
<span class="material-symbols-outlined" id="down">
currency_rupee
</span><label for="deductAmount">VALUE AMOUNT (&#8377.)</label></div>
<input type="number" id="deductAmount" name="VALUE AMOUNT">
</div>
<br>
<div class="flexx">
<div>
<span class="material-symbols-outlined" id="down">
currency_rupee
</span><label for="deductedValue">REMAINING AMOUNT (&#8377.)</label></div>
<input type="text" id="deductedValue" name="REMAINING AMOUNT" readonly>
</div>
<br>
<button type="button"  onclick="calculateTotal()">NEW RENT</button>
<button type="submit"  onclick="showData()">STORE DATA</button>
</div>
</div>

 <div id="resultModal" class="modal">
        <div class="modal-content">
            <span id="closeModal" style="float: right; cursor: pointer;">&times;</span>
            <h2>Summary:</h2>
            <p>Date:             <span id="dateResult"></span></p>
            <p>Time: <span id="timeResult"></span></p>
            <p>Rent (Rs.): <span id="rentResult"></span></p>
            <p>Electricity Bill (Rs.): <span id="electricityResult"></span></p>
            <p>Water Bill (Rs.): <span id="waterResult"></span></p>
            <p>month <span id="descriptionResult"></span></p>
            <p>Bill Number: <span id="billNoResult"></span></p>
            <p>Total Amount (Rs.): <span id="totalValueResult"></span></p>
            <p>Remaining Value (Rs.): <span id="deductedValueResult"></span></p>
        </div>
    </div>
</form>
</body>
<script src="app.js"></script>
<script>
        // Check if the website is opened as a PWA
        if (window.matchMedia('(display-mode: standalone)').matches) {
            // This means it's a PWA
            document.getElementById('installdiv-abso').style.display = 'none';
        } else {
            // This means it's a regular browser
            document.getElementById('installdiv-abso').style.display = 'block';
        }
    </script>
<!--<script>
        // Check if the website is opened as a PWA
        if (window.matchMedia('(display-mode: standalone)').matches) {
            // This means it's a PWA
            document.getElementById('installdiv').style.display = 'none';
        } else {
            // This means it's a regular browser
            document.getElementById('installdiv').style.display = 'block';
        }
    </script>-->
<script>
        // Check if the website is opened as a PWA
        if (window.matchMedia('(display-mode: standalone)').matches) {
            // This means it's a PWA
            document.getElementById('installButton').style.display = 'none';
        } else {
            // This means it's a regular browser
            document.getElementById('installButton').style.display = 'block';
        }
    </script>
 <script>
        window.addEventListener('load', () => {
            registerSW();
        });

        async function registerSW() {
        if ('serviceWorker' in navigator) {
            try{
                await navigator
                .serviceWorker
                .register('service-worker.js');
            }
                catch (e) {
                    console.log('Service Worker registration failed');
                }
            }
        }

    </script>
<script>
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (event) => {
      // Prevent the default behavior to show the install prompt
      event.preventDefault();
      
      // Stash the event so it can be triggered later.
      deferredPrompt = event;

      // Show the install button
      document.getElementById('installButton').style.display = 'block';
    });

    document.getElementById('installButton').addEventListener('click', () => {
      // Show the install prompt
      deferredPrompt.prompt();

      // Wait for the user to respond to the prompt
      deferredPrompt.userChoice.then((choiceResult) => {
        if (choiceResult.outcome === 'accepted') {
          console.log('User accepted the install prompt');
        } else {
          console.log('User dismissed the install prompt');
        }

        // Reset deferredPrompt to null
        deferredPrompt = null;
      });
    });
  </script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
      // Check if the user has visited the page before
      var hasVisited = localStorage.getItem('hasVisited');

      if (!hasVisited) {
        // Show the content
        document.getElementById('content').style.display = 'block';

        // Set a flag in local storage indicating that the user has visited
        localStorage.setItem('hasVisited', 'true');
      }
    });
  </script>
<script>
        let billNumber = 1; // Initialize bill number

        const dateInput = document.getElementById("date");
        const timeInput = document.getElementById("time");
        const rentInput = document.getElementById("rent");
        const electricityInput = document.getElementById("electricity");
        const waterInput = document.getElementById("water");
        const descriptionInput = document.getElementById("description");
        const billNoInput = document.getElementById("billNo");
        const totalValueInput = document.getElementById("totalValue");
        const deductAmountInput = document.getElementById("deductAmount");
        const deductedValueInput = document.getElementById("deductedValue");

        // Update date and time automatically
        function updateDateTime() {
            const currentDate = new Date();
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            dateInput.value = currentDate.toLocaleString(undefined, options);
            timeInput.value = currentDate.toLocaleTimeString();
        }

        // Calculate and update values on input change
        function updateValues() {
            const rent = parseFloat(rentInput.value) || 0;
            const electricity = parseFloat(electricityInput.value) || 0;
            const water = parseFloat(waterInput.value) || 0;
            const deductAmount = parseFloat(deductAmountInput.value) || 0;
            
            const totalValue = rent + electricity + water;
            const deductedValue = totalValue - deductAmount;

            totalValueInput.value = totalValue;
            deductedValueInput.value = deductedValue;
        }

        // Show data in the modal dialog
        function showData() {
            updateValues();
            updateDateTime();
            const date = dateInput.value;
            const time = timeInput.value;
            const rent = rentInput.value;
            const electricity = electricityInput.value;
            const water = waterInput.value;
            const description = descriptionInput.value;
            const monthYear = dateInput.value.split(' ')[0]; // Abbreviated month
            const billNo = `${monthYear}-${billNumber.toString().padStart(4, '0')}`;
            const totalValue = totalValueInput.value;
            const deductedValue = deductedValueInput.value;

            const modalContent = document.querySelector('.modal-content');
            modalContent.innerHTML = `
                <span id="closeModal" style="float: right; cursor: pointer;position:relative;bottom:10px;">&times;</span>
                <h1 id="h2">RENT BILL SUMMARY</h1>
                <h4>DATE.                  | ${date}</h4>
                <h4>TIME.                  | ${time}</h4>
                <h4>RENT (Rs.).            | ${rent}</h4>
                <h4>ELECTRICITY BILL (Rs.) | ${electricity}</h4>
                <h4>WATER BILL (Rs.).      | ${water}</h4>
                <h4>MONTH.                 | ${description}</h4>
                <h4>BILL NUMBER.           | ${billNo}</h4>
                <h4>TOTAL AMOUNT (Rs.).    | ${totalValue}</h4>
                <h4>REMAINING AMOUNT (Rs.).| ${deductedValue}</h4>
            `;

            const modal = document.getElementById('resultModal');
            modal.style.display = 'block';

            // Close the modal when clicking the "x" button
            const closeModal = document.getElementById('closeModal');
            closeModal.onclick = function() {
                modal.style.display = 'none';
            }

            // Close the modal when clicking outside the content area
            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            }
        }

        // Calculate and reload the page
        function calculateTotal() {
            location.reload(); // Reload the page
        }

        // Add event listeners to update values on input change
        rentInput.addEventListener("input", updateValues);
        electricityInput.addEventListener("input", updateValues);
        waterInput.addEventListener("input", updateValues);
        descriptionInput.addEventListener("input", updateValues);
        deductAmountInput.addEventListener("input", updateValues);

        // Initialize values
        updateDateTime();
        updateValues();
    </script>
<script>
            const scriptURL = 'https://script.google.com/macros/s/AKfycbyP1M7JSQkKpy5oIQbHkIIhaJoWyPQyqX7Ymyd7uIHhEEGwiE3vxWrruRD8QwYIFFT9/exec'
            const form = document.forms['sanjay-sheet']
          
            form.addEventListener('submit', e => {
              e.preventDefault()
              fetch(scriptURL, { method: 'POST', body: new FormData(form)})
                .then(response => alert("THANKU FOR STORING DATA"))
                .catch(error => console.error('Error!', error.message))
            })
          </script>
 <script>
        // Get the content editable element
        const editableElement = document.getElementById("editable");

        // Load saved content from local storage on page load
        const savedContent = localStorage.getItem("savedContent");
        if (savedContent) {
            editableElement.innerHTML = savedContent;
        }

        // Add an event listener to save content on input
        editableElement.addEventListener("input", function() {
            // Get the current content and save it to local storage
            const content = editableElement.innerHTML;
            localStorage.setItem("savedContent", content);
        });
    </script>

</html>
